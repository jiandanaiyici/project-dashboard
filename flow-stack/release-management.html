<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlowStack - 发布管控</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 引入Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            neutral: '#F5F7FA',
            dark: '#1D2129',
            success: '#52C41A',
            warning: '#FAAD14',
            danger: '#FF4D4F',
            'dark-blue': '#0F2E6B',
            'release-planned': '#165DFF',
            'release-in-progress': '#FAAD14',
            'release-completed': '#52C41A',
            'release-failed': '#FF4D4F',
            'env-dev': '#36CFC9',
            'env-test': '#FAAD14',
            'env-staging': '#165DFF',
            'env-production': '#FF4D4F'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-shadow {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }
      .hover-lift {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .hover-lift:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
      }
      .gradient-bg {
        background: linear-gradient(135deg, #165DFF 0%, #0F2E6B 100%);
      }
      .timeline-line {
        @apply absolute left-3 top-6 bottom-0 w-0.5 bg-gray-200;
      }
      .scrollbar-thin {
        scrollbar-width: thin;
      }
      .scrollbar-thin::-webkit-scrollbar {
        width: 4px;
      }
      .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: rgba(156, 163, 175, 0.5);
        border-radius: 2px;
      }
    }
  </style>
</head>

<body class="bg-gray-50 font-inter text-dark min-h-screen flex flex-col">
  <!-- 顶部导航栏 -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <!-- 左侧Logo和名称 -->
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 rounded-lg gradient-bg flex items-center justify-center">
            <span class="text-white font-bold text-xl">F</span>
          </div>
          <span class="text-xl font-bold text-dark">FlowStack</span>
        </div>
        
        <!-- 中间导航菜单 -->
        <nav class="hidden md:flex items-center space-x-8">
          <a href="dashboard.html" class="text-gray-600 hover:text-primary transition-colors duration-200">全域大盘</a>
          <a href="project-management-enhanced.html" class="text-gray-600 hover:text-primary transition-colors duration-200">项目管理</a>
          <a href="complete-team-performance.html" class="text-gray-600 hover:text-primary transition-colors duration-200">团队效能</a>
          <a href="release-management.html" class="text-primary font-medium border-b-2 border-primary pb-1">发布管控</a>
          <a href="ai-decision.html" class="text-gray-600 hover:text-primary transition-colors duration-200">AI决策</a>
          <a href="personal-dashboard.html" class="text-gray-600 hover:text-primary transition-colors duration-200">个人看板</a>
        </nav>
        
        <!-- 右侧用户区域 -->
        <div class="flex items-center space-x-4">
          <button class="relative p-2 text-gray-500 hover:text-primary transition-colors">
            <i class="fa fa-bell text-lg"></i>
            <span class="absolute top-1 right-1 w-2 h-2 bg-danger rounded-full"></span>
          </button>
          <div class="flex items-center space-x-2 cursor-pointer">
            <img src="https://picsum.photos/id/1005/200/200" alt="张经理的头像" class="w-8 h-8 rounded-full object-cover border-2 border-gray-200">
            <span class="hidden md:inline text-sm font-medium">张经理</span>
            <i class="fa fa-angle-down text-gray-500"></i>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- 项目导航栏 -->
  <div class="bg-white border-b border-gray-200">
    <div class="container mx-auto px-4">
      <div class="flex flex-wrap items-center justify-between py-3">
        <!-- 项目信息 -->
        <div class="flex items-center">
          <h2 class="text-lg font-semibold mr-3">支付系统重构</h2>
          <span class="px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full">进行中</span>
          <span class="ml-4 text-sm text-gray-500 hidden md:inline">
            <i class="fa fa-code-fork mr-1"></i> v2.0.0 发布周期
          </span>
        </div>
        
        <!-- 发布管控导航标签 -->
        <div class="flex flex-wrap mt-3 sm:mt-0">
          <a href="#" class="px-3 py-1.5 text-sm text-primary border-b-2 border-primary mr-1">发布计划</a>
          <a href="#" class="px-3 py-1.5 text-sm text-gray-600 hover:text-primary transition-colors mr-1">环境管理</a>
          <a href="#" class="px-3 py-1.5 text-sm text-gray-600 hover:text-primary transition-colors mr-1">变更审批</a>
          <a href="#" class="px-3 py-1.5 text-sm text-gray-600 hover:text-primary transition-colors mr-1">发布历史</a>
          <a href="#" class="px-3 py-1.5 text-sm text-gray-600 hover:text-primary transition-colors">应急回滚</a>
        </div>
      </div>
    </div>
  </div>

  <!-- 主内容区 -->
  <main class="flex-grow container mx-auto px-4 py-6">
    <!-- 页面操作区 -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
      <div>
        <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-dark">发布管控中心</h1>
        <p class="text-gray-500 mt-1">自动化发布流程 · 风险管控 · 全链路追踪</p>
      </div>
      
      <div class="flex items-center mt-4 md:mt-0">
        <div class="relative mr-3">
          <select class="appearance-none bg-white border border-gray-300 rounded-lg py-2 pl-3 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
            <option>所有环境</option>
            <option>开发环境</option>
            <option>测试环境</option>
            <option>预发布环境</option>
            <option>生产环境</option>
          </select>
          <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
            <i class="fa fa-chevron-down text-xs"></i>
          </div>
        </div>
        
        <button class="bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg py-2 px-4 text-sm font-medium transition-colors flex items-center mr-3">
          <i class="fa fa-filter mr-2"></i>筛选
        </button>
        
        <button class="bg-primary hover:bg-primary/90 text-white rounded-lg py-2 px-4 text-sm font-medium transition-colors flex items-center">
          <i class="fa fa-plus mr-2"></i>创建发布计划
        </button>
      </div>
    </div>
    
    <!-- 发布概览指标 -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
      <div class="bg-white rounded-xl p-5 card-shadow hover-lift">
        <div class="flex items-center justify-between">
          <div class="text-gray-500 text-sm">当前发布周期</div>
          <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center">
            <i class="fa fa-calendar text-primary text-sm"></i>
          </div>
        </div>
        <div class="mt-3 text-xl font-bold">v2.0.0</div>
        <div class="mt-1 text-xs text-gray-500">
          <span>开始于 6月1日</span> · <span>计划发布 6月30日</span>
        </div>
      </div>
      
      <div class="bg-white rounded-xl p-5 card-shadow hover-lift">
        <div class="flex items-center justify-between">
          <div class="text-gray-500 text-sm">待发布变更</div>
          <div class="w-8 h-8 rounded-full bg-warning/10 flex items-center justify-center">
            <i class="fa fa-code-fork text-warning text-sm"></i>
          </div>
        </div>
        <div class="mt-3 text-xl font-bold">12</div>
        <div class="mt-1 text-xs text-gray-500">
          <span class="text-primary">8个功能</span> · <span class="text-danger">4个Bug修复</span>
        </div>
      </div>
      
      <div class="bg-white rounded-xl p-5 card-shadow hover-lift">
        <div class="flex items-center justify-between">
          <div class="text-gray-500 text-sm">发布成功率</div>
          <div class="w-8 h-8 rounded-full bg-success/10 flex items-center justify-center">
            <i class="fa fa-check-circle text-success text-sm"></i>
          </div>
        </div>
        <div class="mt-3 text-xl font-bold">92%</div>
        <div class="mt-1 text-xs text-gray-500">
          <span class="text-success"><i class="fa fa-arrow-up mr-1"></i>5%</span> 相比上季度
        </div>
      </div>
      
      <div class="bg-white rounded-xl p-5 card-shadow hover-lift">
        <div class="flex items-center justify-between">
          <div class="text-gray-500 text-sm">平均发布时长</div>
          <div class="w-8 h-8 rounded-full bg-secondary/10 flex items-center justify-center">
            <i class="fa fa-clock-o text-secondary text-sm"></i>
          </div>
        </div>
        <div class="mt-3 text-xl font-bold">18分钟</div>
        <div class="mt-1 text-xs text-gray-500">
          <span class="text-success"><i class="fa fa-arrow-down mr-1"></i>12%</span> 相比上季度
        </div>
      </div>
    </div>
    
    <!-- 发布进度和风险分析 -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
      <!-- 发布进度 -->
      <div class="lg:col-span-2 bg-white rounded-xl p-6 card-shadow">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="font-semibold text-gray-800">发布流水线进度</h3>
            <p class="text-gray-500 text-sm mt-1">v2.0.0 发布周期 · 总体进度 68%</p>
          </div>
          <div class="flex items-center">
            <span class="text-sm text-gray-600 mr-2">自动部署:</span>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" checked class="sr-only peer">
              <div class="w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"></div>
            </label>
          </div>
        </div>
        
        <!-- 发布流程进度 -->
        <div class="relative">
          <!-- 连接线 -->
          <div class="absolute top-5 left-0 right-0 h-0.5 bg-gray-200 -z-10"></div>
          <div class="absolute top-5 left-0 h-0.5 bg-primary -z-0" style="width: 68%"></div>
          
          <div class="flex justify-between relative">
            <!-- 开发环境 -->
            <div class="flex flex-col items-center">
              <div class="w-10 h-10 rounded-full bg-success flex items-center justify-center text-white z-10">
                <i class="fa fa-check"></i>
              </div>
              <div class="mt-2 text-sm font-medium">开发环境</div>
              <div class="text-xs text-gray-500 mt-1">已完成</div>
              <div class="text-xs text-gray-500">6月5日</div>
            </div>
            
            <!-- 测试环境 -->
            <div class="flex flex-col items-center">
              <div class="w-10 h-10 rounded-full bg-success flex items-center justify-center text-white z-10">
                <i class="fa fa-check"></i>
              </div>
              <div class="mt-2 text-sm font-medium">测试环境</div>
              <div class="text-xs text-gray-500 mt-1">已完成</div>
              <div class="text-xs text-gray-500">6月12日</div>
            </div>
            
            <!-- 预发布环境 -->
            <div class="flex flex-col items-center">
              <div class="w-10 h-10 rounded-full bg-warning flex items-center justify-center text-white z-10 animate-pulse">
                <i class="fa fa-spinner fa-spin"></i>
              </div>
              <div class="mt-2 text-sm font-medium">预发布环境</div>
              <div class="text-xs text-warning mt-1">进行中</div>
              <div class="text-xs text-gray-500">预计6月20日</div>
            </div>
            
            <!-- 生产环境 -->
            <div class="flex flex-col items-center">
              <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 z-10">
                <i class="fa fa-lock"></i>
              </div>
              <div class="mt-2 text-sm font-medium">生产环境</div>
              <div class="text-xs text-gray-500 mt-1">未开始</div>
              <div class="text-xs text-gray-500">计划6月30日</div>
            </div>
          </div>
        </div>
        
        <!-- 环境详情 -->
        <div class="mt-8 space-y-6">
          <!-- 预发布环境详情 -->
          <div class="border border-warning/30 rounded-xl p-4 bg-warning/5">
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-env-staging mr-2"></div>
                <h4 class="font-medium text-gray-800">预发布环境部署</h4>
              </div>
              <div class="flex items-center">
                <span class="px-2 py-0.5 bg-warning/10 text-warning text-xs rounded-full mr-2">进行中</span>
                <span class="text-xs text-gray-500">已运行 12分钟</span>
              </div>
            </div>
            
            <!-- 部署进度 -->
            <div class="mt-4">
              <div class="flex justify-between text-sm mb-1">
                <span class="text-gray-600">部署进度</span>
                <span class="text-gray-600">75%</span>
              </div>
              <div class="h-2 bg-gray-200 rounded-full">
                <div class="h-full bg-warning rounded-full" style="width: 75%"></div>
              </div>
            </div>
            
            <!-- 部署步骤 -->
            <div class="mt-4 space-y-2">
              <div class="flex items-center text-sm">
                <i class="fa fa-check-circle text-success mr-2"></i>
                <span>代码拉取与编译</span>
                <span class="ml-auto text-xs text-gray-500">已完成 (2m30s)</span>
              </div>
              <div class="flex items-center text-sm">
                <i class="fa fa-check-circle text-success mr-2"></i>
                <span>数据库迁移</span>
                <span class="ml-auto text-xs text-gray-500">已完成 (3m15s)</span>
              </div>
              <div class="flex items-center text-sm">
                <i class="fa fa-spinner fa-spin text-warning mr-2"></i>
                <span>应用部署与启动</span>
                <span class="ml-auto text-xs text-gray-500">进行中 (6m45s)</span>
              </div>
              <div class="flex items-center text-sm text-gray-400">
                <i class="fa fa-circle-o mr-2"></i>
                <span>自动化测试执行</span>
                <span class="ml-auto text-xs">待执行</span>
              </div>
              <div class="flex items-center text-sm text-gray-400">
                <i class="fa fa-circle-o mr-2"></i>
                <span>性能指标监控</span>
                <span class="ml-auto text-xs">待执行</span>
              </div>
            </div>
            
            <div class="mt-4 flex justify-end space-x-3">
              <button class="bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg py-1.5 px-3 text-sm font-medium transition-colors flex items-center">
                <i class="fa fa-pause mr-2"></i>暂停
              </button>
              <button class="bg-danger hover:bg-danger/90 text-white rounded-lg py-1.5 px-3 text-sm font-medium transition-colors flex items-center">
                <i class="fa fa-stop mr-2"></i>终止
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 风险分析 -->
      <div class="bg-white rounded-xl p-6 card-shadow">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="font-semibold text-gray-800">发布风险分析</h3>
            <p class="text-gray-500 text-sm mt-1">基于AI的风险识别与评估</p>
          </div>
          <button class="text-primary text-sm hover:underline">查看详情</button>
        </div>
        
        <!-- 风险评分 -->
        <div class="flex justify-center mb-6">
          <div class="relative w-32 h-32">
            <canvas id="riskGaugeChart"></canvas>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
              <div class="text-3xl font-bold text-warning">68</div>
              <div class="text-xs text-gray-500">风险评分</div>
            </div>
          </div>
        </div>
        
        <!-- 风险列表 -->
        <div class="space-y-4">
          <div class="p-3 bg-danger/5 border border-danger/20 rounded-lg">
            <div class="flex items-start">
              <div class="w-8 h-8 rounded-full bg-danger/10 flex items-center justify-center flex-shrink-0 mt-0.5">
                <i class="fa fa-exclamation-triangle text-danger"></i>
              </div>
              <div class="ml-3">
                <div class="flex justify-between">
                  <p class="text-sm font-medium">支付核心模块变更</p>
                  <span class="px-2 py-0.5 bg-danger/10 text-danger text-xs rounded-full">高风险</span>
                </div>
                <p class="text-xs text-gray-600 mt-1">涉及支付流程核心逻辑变更，影响范围广，建议增加测试覆盖率</p>
                <button class="mt-2 text-danger text-xs font-medium hover:underline">查看缓解措施</button>
              </div>
            </div>
          </div>
          
          <div class="p-3 bg-warning/5 border border-warning/20 rounded-lg">
            <div class="flex items-start">
              <div class="w-8 h-8 rounded-full bg-warning/10 flex items-center justify-center flex-shrink-0 mt-0.5">
                <i class="fa fa-exclamation-circle text-warning"></i>
              </div>
              <div class="ml-3">
                <div class="flex justify-between">
                  <p class="text-sm font-medium">数据库 schema 变更</p>
                  <span class="px-2 py-0.5 bg-warning/10 text-warning text-xs rounded-full">中风险</span>
                </div>
                <p class="text-xs text-gray-600 mt-1">包含3张核心表结构变更，建议先在预发布环境验证数据迁移</p>
                <button class="mt-2 text-warning text-xs font-medium hover:underline">查看缓解措施</button>
              </div>
            </div>
          </div>
          
          <div class="p-3 bg-primary/5 border border-primary/20 rounded-lg">
            <div class="flex items-start">
              <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5">
                <i class="fa fa-info-circle text-primary"></i>
              </div>
              <div class="ml-3">
                <div class="flex justify-between">
                  <p class="text-sm font-medium">第三方支付接口升级</p>
                  <span class="px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full">低风险</span>
                </div>
                <p class="text-xs text-gray-600 mt-1">支付宝接口版本升级，已完成兼容性测试，但建议监控首小时调用情况</p>
              </div>
            </div>
          </div>
        </div>
        
        <button class="mt-6 w-full bg-white border border-primary text-primary hover:bg-primary/5 rounded-lg py-2 text-sm font-medium transition-colors flex items-center justify-center">
          <i class="fa fa-shield mr-2"></i>生成风险缓解计划
        </button>
      </div>
    </div>
    
    <!-- 变更清单和审批流程 -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
      <!-- 变更清单 -->
      <div class="lg:col-span-2 bg-white rounded-xl p-6 card-shadow">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="font-semibold text-gray-800">待发布变更清单</h3>
            <p class="text-gray-500 text-sm mt-1">包含12项变更 · 预计发布到生产环境</p>
          </div>
          <div class="relative">
            <select class="appearance-none bg-white border border-gray-300 rounded-lg py-1.5 pl-3 pr-8 text-xs focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
              <option>全部类型</option>
              <option>功能更新</option>
              <option>Bug修复</option>
              <option>性能优化</option>
              <option>安全修复</option>
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
              <i class="fa fa-chevron-down text-xs"></i>
            </div>
          </div>
        </div>
        
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead>
              <tr>
                <th class="px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tl-lg">变更ID</th>
                <th class="px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                <th class="px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">类型</th>
                <th class="px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">提交人</th>
                <th class="px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">风险等级</th>
                <th class="px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tr-lg">状态</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900">#PR-4562</td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900 max-w-xs truncate">支付核心模块重构与性能优化</td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">功能更新</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <div class="flex items-center">
                    <img class="w-6 h-6 rounded-full mr-2" src="https://picsum.photos/id/1012/200/200" alt="李工程师的头像">
                    <span class="text-sm text-gray-900">李工程师</span>
                  </div>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">高</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-success">已审核</td>
              </tr>
              
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900">#PR-4578</td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900 max-w-xs truncate">修复大额支付偶发超时问题</td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">Bug修复</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <div class="flex items-center">
                    <img class="w-6 h-6 rounded-full mr-2" src="https://picsum.photos/id/1012/200/200" alt="李工程师的头像">
                    <span class="text-sm text-gray-900">李工程师</span>
                  </div>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-red-100 text-red-800">高</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-success">已审核</td>
              </tr>
              
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900">#PR-4591</td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900 max-w-xs truncate">支付宝支付接口升级至v3版本</td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">功能更新</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <div class="flex items-center">
                    <img class="w-6 h-6 rounded-full mr-2" src="https://picsum.photos/id/1025/200/200" alt="赵架构的头像">
                    <span class="text-sm text-gray-900">赵架构</span>
                  </div>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">中</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-success">已审核</td>
              </tr>
              
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900">#PR-4602</td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900 max-w-xs truncate">添加支付安全验证机制</td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800">安全修复</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <div class="flex items-center">
                    <img class="w-6 h-6 rounded-full mr-2" src="https://picsum.photos/id/1005/200/200" alt="张经理的头像">
                    <span class="text-sm text-gray-900">张经理</span>
                  </div>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">中</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-warning">审核中</td>
              </tr>
              
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900">#PR-4615</td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-gray-900 max-w-xs truncate">优化数据库查询性能</td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">性能优化</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <div class="flex items-center">
                    <img class="w-6 h-6 rounded-full mr-2" src="https://picsum.photos/id/1027/200/200" alt="王测试的头像">
                    <span class="text-sm text-gray-900">王测试</span>
                  </div>
                </td>
                <td class="px-3 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">低</span>
                </td>
                <td class="px-3 py-3 whitespace-nowrap text-sm text-success">已审核</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="mt-4 flex justify-between items-center">
          <div class="text-sm text-gray-500">显示 1-5 项，共 12 项</div>
          <div class="flex space-x-1">
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 bg-white text-gray-500 hover:bg-gray-50">1</button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50">2</button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50">3</button>
          </div>
        </div>
      </div>
      
      <!-- 审批流程 -->
      <div class="bg-white rounded-xl p-6 card-shadow">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="font-semibold text-gray-800">生产环境发布审批</h3>
            <p class="text-gray-500 text-sm mt-1">v2.0.0 生产发布审批流程</p>
          </div>
          <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">待审批</span>
        </div>
        
        <!-- 审批进度 -->
        <div class="mb-6">
          <div class="relative">
            <div class="absolute left-3 top-0 bottom-0 w-0.5 bg-gray-200"></div>
            
            <div class="relative pl-10 pb-6">
              <div class="absolute left-0 top-1 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white text-xs">
                <i class="fa fa-check"></i>
              </div>
              <div class="font-medium text-sm">开发自测</div>
              <div class="text-xs text-gray-500 mt-1">已通过 · 李工程师</div>
              <div class="text-xs text-gray-600 mt-2">所有功能点均已完成自测，单元测试覆盖率92%</div>
            </div>
            
            <div class="relative pl-10 pb-6">
              <div class="absolute left-0 top-1 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white text-xs">
                <i class="fa fa-check"></i>
              </div>
              <div class="font-medium text-sm">测试验证</div>
              <div class="text-xs text-gray-500 mt-1">已通过 · 王测试</div>
              <div class="text-xs text-gray-600 mt-2">功能测试和性能测试已通过，未发现阻塞性问题</div>
            </div>
            
            <div class="relative pl-10 pb-6">
              <div class="absolute left-0 top-1 w-6 h-6 rounded-full bg-warning flex items-center justify-center text-white text-xs animate-pulse">
                <i class="fa fa-clock-o"></i>
              </div>
              <div class="font-medium text-sm">技术负责人审批</div>
              <div class="text-xs text-gray-500 mt-1">待审批 · 赵架构</div>
              <div class="text-xs text-gray-600 mt-2">等待技术负责人审核架构变更和技术风险</div>
            </div>
            
            <div class="relative pl-10 pb-6">
              <div class="absolute left-0 top-1 w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs">
                <i class="fa fa-lock"></i>
              </div>
              <div class="font-medium text-sm text-gray-500">产品负责人审批</div>
              <div class="text-xs text-gray-500 mt-1">未开始 · 刘产品</div>
            </div>
            
            <div class="relative pl-10">
              <div class="absolute left-0 top-1 w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs">
                <i class="fa fa-lock"></i>
              </div>
              <div class="font-medium text-sm text-gray-500">业务负责人审批</div>
              <div class="text-xs text-gray-500 mt-1">未开始 · 孙总监</div>
            </div>
          </div>
        </div>
        
        <!-- 审批信息 -->
        <div class="border-t border-gray-200 pt-4">
          <div class="flex justify-between text-sm mb-2">
            <span class="text-gray-600">申请日期</span>
            <span class="font-medium">2023-06-18</span>
          </div>
          <div class="flex justify-between text-sm mb-2">
            <span class="text-gray-600">申请人</span>
            <span class="font-medium">张经理</span>
          </div>
          <div class="flex justify-between text-sm mb-2">
            <span class="text-gray-600">计划发布时间</span>
            <span class="font-medium">2023-06-30 22:00</span>
          </div>
          <div class="flex justify-between text-sm mb-2">
            <span class="text-gray-600">发布方式</span>
            <span class="font-medium">蓝绿部署</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-gray-600">回滚方案</span>
            <span class="font-medium text-primary">已准备</span>
          </div>
        </div>
        
        <button class="mt-6 w-full bg-primary hover:bg-primary/90 text-white rounded-lg py-2 text-sm font-medium transition-colors flex items-center justify-center">
          <i class="fa fa-file-text-o mr-2"></i>查看完整审批单
        </button>
      </div>
    </div>
    
    <!-- 环境管理和发布历史 -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- 环境管理 -->
      <div class="bg-white rounded-xl p-6 card-shadow">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="font-semibold text-gray-800">环境管理</h3>
            <p class="text-gray-500 text-sm mt-1">部署环境配置与状态</p>
          </div>
          <button class="text-primary text-sm hover:underline">管理环境</button>
        </div>
        
        <div class="space-y-4">
          <div class="border border-gray-200 rounded-lg p-4 hover:border-env-dev transition-colors cursor-pointer">
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-env-dev mr-2"></div>
                <h4 class="font-medium text-gray-800">开发环境</h4>
              </div>
              <span class="px-2 py-0.5 bg-success/10 text-success text-xs rounded-full">正常</span>
            </div>
            <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">当前版本</div>
                <div class="font-medium mt-1">v2.0.0-dev.56</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">上次部署</div>
                <div class="font-medium mt-1">6月5日 10:23</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">服务器</div>
                <div class="font-medium mt-1">3台 · 开发集群</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">状态</div>
                <div class="font-medium mt-1 text-success">全部运行中</div>
              </div>
            </div>
          </div>
          
          <div class="border border-gray-200 rounded-lg p-4 hover:border-env-test transition-colors cursor-pointer">
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-env-test mr-2"></div>
                <h4 class="font-medium text-gray-800">测试环境</h4>
              </div>
              <span class="px-2 py-0.5 bg-success/10 text-success text-xs rounded-full">正常</span>
            </div>
            <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">当前版本</div>
                <div class="font-medium mt-1">v2.0.0-test.32</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">上次部署</div>
                <div class="font-medium mt-1">6月12日 15:47</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">服务器</div>
                <div class="font-medium mt-1">4台 · 测试集群</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">状态</div>
                <div class="font-medium mt-1 text-success">全部运行中</div>
              </div>
            </div>
          </div>
          
          <div class="border border-gray-200 rounded-lg p-4 hover:border-env-staging transition-colors cursor-pointer">
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-env-staging mr-2"></div>
                <h4 class="font-medium text-gray-800">预发布环境</h4>
              </div>
              <span class="px-2 py-0.5 bg-warning/10 text-warning text-xs rounded-full">部署中</span>
            </div>
            <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">当前版本</div>
                <div class="font-medium mt-1">v2.0.0-staging.18</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">上次部署</div>
                <div class="font-medium mt-1">进行中 · 12分钟</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">服务器</div>
                <div class="font-medium mt-1">6台 · 预发布集群</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">状态</div>
                <div class="font-medium mt-1 text-warning">部分部署中</div>
              </div>
            </div>
          </div>
          
          <div class="border border-gray-200 rounded-lg p-4 hover:border-env-production transition-colors cursor-pointer">
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-env-production mr-2"></div>
                <h4 class="font-medium text-gray-800">生产环境</h4>
              </div>
              <span class="px-2 py-0.5 bg-success/10 text-success text-xs rounded-full">正常</span>
            </div>
            <div class="mt-3 grid grid-cols-2 gap-2 text-xs">
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">当前版本</div>
                <div class="font-medium mt-1">v1.9.3</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">上次部署</div>
                <div class="font-medium mt-1">5月20日 23:15</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">服务器</div>
                <div class="font-medium mt-1">12台 · 生产集群</div>
              </div>
              <div class="bg-gray-50 p-2 rounded">
                <div class="text-gray-500">状态</div>
                <div class="font-medium mt-1 text-success">全部运行中</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 发布历史 -->
      <div class="lg:col-span-2 bg-white rounded-xl p-6 card-shadow">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3 class="font-semibold text-gray-800">发布历史</h3>
            <p class="text-gray-500 text-sm mt-1">过去6个月的发布记录</p>
          </div>
          <div class="relative">
            <select class="appearance-none bg-white border border-gray-300 rounded-lg py-1.5 pl-3 pr-8 text-xs focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
              <option>所有环境</option>
              <option>开发环境</option>
              <option>测试环境</option>
              <option>预发布环境</option>
              <option>生产环境</option>
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
              <i class="fa fa-chevron-down text-xs"></i>
            </div>
          </div>
        </div>
        
        <div class="space-y-4">
          <div class="border border-gray-200 rounded-lg p-4 hover:border-primary/30 transition-colors">
            <div class="flex flex-wrap items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-success/10 flex items-center justify-center mr-3">
                  <i class="fa fa-check text-success"></i>
                </div>
                <div>
                  <div class="font-medium text-sm">生产环境发布 v1.9.3</div>
                  <div class="text-xs text-gray-500 mt-0.5">2023-05-20 23:15 · 由 张经理 发布</div>
                </div>
              </div>
              <div class="mt-2 sm:mt-0">
                <span class="px-2 py-0.5 bg-success/10 text-success text-xs rounded-full">成功</span>
              </div>
            </div>
            
            <div class="mt-3 flex flex-wrap gap-2">
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">5个功能</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">3个Bug修复</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">蓝绿部署</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">18分钟</span>
            </div>
            
            <div class="mt-3 pt-3 border-t border-gray-100 flex justify-between">
              <div class="flex items-center text-sm text-gray-600">
                <i class="fa fa-line-chart text-primary mr-2"></i>
                <span>发布后性能提升 12%</span>
              </div>
              <div class="flex space-x-2">
                <button class="text-primary text-xs hover:underline">查看详情</button>
                <button class="text-gray-500 text-xs hover:text-gray-700">对比差异</button>
              </div>
            </div>
          </div>
          
          <div class="border border-gray-200 rounded-lg p-4 hover:border-primary/30 transition-colors">
            <div class="flex flex-wrap items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-success/10 flex items-center justify-center mr-3">
                  <i class="fa fa-check text-success"></i>
                </div>
                <div>
                  <div class="font-medium text-sm">生产环境发布 v1.9.2</div>
                  <div class="text-xs text-gray-500 mt-0.5">2023-05-05 22:30 · 由 张经理 发布</div>
                </div>
              </div>
              <div class="mt-2 sm:mt-0">
                <span class="px-2 py-0.5 bg-success/10 text-success text-xs rounded-full">成功</span>
              </div>
            </div>
            
            <div class="mt-3 flex flex-wrap gap-2">
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">0个功能</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">7个Bug修复</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">滚动更新</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">12分钟</span>
            </div>
            
            <div class="mt-3 pt-3 border-t border-gray-100 flex justify-between">
              <div class="flex items-center text-sm text-gray-600">
                <i class="fa fa-shield text-success mr-2"></i>
                <span>修复了2个安全漏洞</span>
              </div>
              <div class="flex space-x-2">
                <button class="text-primary text-xs hover:underline">查看详情</button>
                <button class="text-gray-500 text-xs hover:text-gray-700">对比差异</button>
              </div>
            </div>
          </div>
          
          <div class="border border-gray-200 rounded-lg p-4 hover:border-primary/30 transition-colors">
            <div class="flex flex-wrap items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-danger/10 flex items-center justify-center mr-3">
                  <i class="fa fa-times text-danger"></i>
                </div>
                <div>
                  <div class="font-medium text-sm">生产环境发布 v1.9.1</div>
                  <div class="text-xs text-gray-500 mt-0.5">2023-04-28 21:45 · 由 张经理 发布</div>
                </div>
              </div>
              <div class="mt-2 sm:mt-0">
                <span class="px-2 py-0.5 bg-danger/10 text-danger text-xs rounded-full">失败</span>
              </div>
            </div>
            
            <div class="mt-3 flex flex-wrap gap-2">
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">2个功能</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">1个Bug修复</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">蓝绿部署</span>
              <span class="px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">失败于15分钟</span>
            </div>
            
            <div class="mt-3 pt-3 border-t border-gray-100 flex justify-between">
              <div class="flex items-center text-sm text-gray-600">
                <i class="fa fa-refresh text-warning mr-2"></i>
                <span>已回滚至 v1.9.0</span>
              </div>
              <div class="flex space-x-2">
                <button class="text-primary text-xs hover:underline">查看详情</button>
                <button class="text-gray-500 text-xs hover:text-gray-700">失败分析</button>
              </div>
            </div>
          </div>
        </div>
        
        <button class="mt-6 w-full bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg py-2 text-sm font-medium transition-colors flex items-center justify-center">
          <i class="fa fa-history mr-2"></i>查看更多发布历史
        </button>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-white border-t border-gray-200 py-6 mt-8">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-lg gradient-bg flex items-center justify-center">
            <span class="text-white font-bold text-sm">F</span>
          </div>
          <span class="ml-2 text-sm font-medium text-gray-800">FlowStack</span>
          <span class="ml-4 text-xs text-gray-500">© 2025 FlowStack Inc. 保留所有权利</span>
        </div>
        <div class="flex items-center space-x-6 mt-4 md:mt-0">
          <a href="#" class="text-gray-500 hover:text-primary text-sm">使用文档</a>
          <a href="#" class="text-gray-500 hover:text-primary text-sm">隐私政策</a>
          <a href="#" class="text-gray-500 hover:text-primary text-sm">联系我们</a>
          <a href="#" class="text-gray-500 hover:text-primary text-sm">关于我们</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // 初始化风险 gauge 图表
    document.addEventListener('DOMContentLoaded', function() {
      const riskCtx = document.getElementById('riskGaugeChart').getContext('2d');
      
      // 创建半圆环图表
      const riskGaugeChart = new Chart(riskCtx, {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [68, 100 - 68],
            backgroundColor: [
              '#FAAD14',
              '#F3F4F6'
            ],
            borderWidth: 0,
            cutout: '80%'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          rotation: -90,
          circumference: 180,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              enabled: false
            }
          }
        }
      });
      
      // 模拟部署进度更新
      const updateDeploymentProgress = () => {
        const progressEl = document.querySelector('.bg-warning.rounded-full');
        const percentageEl = progressEl.parentElement.querySelector('.text-gray-600:last-child');
        
        if (progressEl && percentageEl) {
          let currentWidth = parseInt(progressEl.style.width);
          if (currentWidth < 100) {
            currentWidth += 1;
            progressEl.style.width = `${currentWidth}%`;
            percentageEl.textContent = `${currentWidth}%`;
            
            // 更新步骤状态
            if (currentWidth >= 30 && currentWidth < 60) {
              document.querySelectorAll('.flex.items-center.text-sm')[2].innerHTML = 
                '<i class="fa fa-check-circle text-success mr-2"></i><span>应用部署与启动</span><span class="ml-auto text-xs text-gray-500">已完成 (8m15s)</span>';
              document.querySelectorAll('.flex.items-center.text-sm')[3].innerHTML = 
                '<i class="fa fa-spinner fa-spin text-warning mr-2"></i><span>自动化测试执行</span><span class="ml-auto text-xs text-gray-500">进行中 (2m30s)</span>';
            } else if (currentWidth >= 60) {
              document.querySelectorAll('.flex.items-center.text-sm')[3].innerHTML = 
                '<i class="fa fa-check-circle text-success mr-2"></i><span>自动化测试执行</span><span class="ml-auto text-xs text-gray-500">已完成 (5m45s)</span>';
              document.querySelectorAll('.flex.items-center.text-sm')[4].innerHTML = 
                '<i class="fa fa-spinner fa-spin text-warning mr-2"></i><span>性能指标监控</span><span class="ml-auto text-xs text-gray-500">进行中 (1m15s)</span>';
            }
          }
        }
      };
      
      // 每5秒更新一次部署进度
      setInterval(updateDeploymentProgress, 5000);
    });
  </script>
</body>
</html>
