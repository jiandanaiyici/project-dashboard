<!-- 来自于豆包 -->
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>产品数据报表 - 移动端</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>

    <!-- 配置Tailwind主题 -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#165DFF",
              secondary: "#36CFC9",
              success: "#52C41A",
              warning: "#FAAD14",
              danger: "#FF4D4F",
              neutral: {
                100: "#F5F5F5",
                200: "#E5E5E5",
                300: "#D4D4D4",
                400: "#A3A3A3",
                500: "#737373",
                600: "#525252",
                700: "#404040",
                800: "#262626",
                900: "#171717",
              },
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
            },
            boxShadow: {
              card: "0 2px 8px rgba(0, 0, 0, 0.08)",
              "card-hover": "0 4px 16px rgba(0, 0, 0, 0.12)",
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      @layer utilities {
        .content-auto {
          content-visibility: auto;
        }
        .scrollbar-hide {
          scrollbar-width: none;
          -ms-overflow-style: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .card-transition {
          transition: all 0.3s ease;
        }
        .gradient-bg {
          background: linear-gradient(135deg, #165dff 0%, #0a47e3 100%);
        }
      }
    </style>
  </head>

  <body class="bg-neutral-100 font-sans text-neutral-800 min-h-screen">
    <!-- 顶部导航栏 -->
    <header
      class="gradient-bg text-white shadow-md fixed top-0 left-0 right-0 z-50"
    >
      <div
        class="container mx-auto px-4 py-4 flex justify-between items-center"
      >
        <h1 class="text-xl font-bold">产品数据报表</h1>
        <div class="flex items-center space-x-4">
          <button class="p-2 rounded-full hover:bg-white/20 transition">
            <i class="fa fa-bell-o"></i>
          </button>
          <div
            class="h-8 w-8 rounded-full bg-white/30 flex items-center justify-center text-sm font-medium"
          >
            PM
          </div>
        </div>
      </div>

      <!-- 时间筛选器 -->
      <div class="bg-white/10 backdrop-blur-sm px-4 py-2">
        <div class="flex items-center justify-between">
          <div class="text-sm">最近7天</div>
          <button class="text-sm flex items-center">
            <span>筛选</span>
            <i class="fa fa-chevron-down ml-1 text-xs"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 pt-28 pb-20">
      <!-- 核心指标概览 -->
      <section class="mb-6">
        <h2 class="text-lg font-semibold mb-4 text-neutral-800">核心指标</h2>

        <div class="grid grid-cols-2 gap-3 mb-4">
          <!-- DAU指标 -->
          <div
            class="bg-white rounded-xl p-4 shadow-card card-transition hover:shadow-card-hover"
          >
            <div class="text-neutral-500 text-xs mb-1">日活跃用户</div>
            <div class="flex items-end justify-between">
              <div class="text-2xl font-bold">24,589</div>
              <div class="text-success text-xs flex items-center">
                <i class="fa fa-arrow-up mr-1"></i> 8.2%
              </div>
            </div>
            <div class="mt-2 h-10">
              <canvas id="dauTrend"></canvas>
            </div>
          </div>

          <!-- 新增用户指标 -->
          <div
            class="bg-white rounded-xl p-4 shadow-card card-transition hover:shadow-card-hover"
          >
            <div class="text-neutral-500 text-xs mb-1">新增用户</div>
            <div class="flex items-end justify-between">
              <div class="text-2xl font-bold">3,241</div>
              <div class="text-danger text-xs flex items-center">
                <i class="fa fa-arrow-down mr-1"></i> 2.1%
              </div>
            </div>
            <div class="mt-2 h-10">
              <canvas id="newUsersTrend"></canvas>
            </div>
          </div>

          <!-- 平均使用时长 -->
          <div
            class="bg-white rounded-xl p-4 shadow-card card-transition hover:shadow-card-hover"
          >
            <div class="text-neutral-500 text-xs mb-1">平均使用时长</div>
            <div class="flex items-end justify-between">
              <div class="text-2xl font-bold">8:24</div>
              <div class="text-success text-xs flex items-center">
                <i class="fa fa-arrow-up mr-1"></i> 12.5%
              </div>
            </div>
            <div class="mt-2 h-10">
              <canvas id="durationTrend"></canvas>
            </div>
          </div>

          <!-- 留存率 -->
          <div
            class="bg-white rounded-xl p-4 shadow-card card-transition hover:shadow-card-hover"
          >
            <div class="text-neutral-500 text-xs mb-1">次日留存率</div>
            <div class="flex items-end justify-between">
              <div class="text-2xl font-bold">42.8%</div>
              <div class="text-success text-xs flex items-center">
                <i class="fa fa-arrow-up mr-1"></i> 3.7%
              </div>
            </div>
            <div class="mt-2 h-10">
              <canvas id="retentionTrend"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- 应用健康状态 -->
      <section class="mb-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-neutral-800">应用健康</h2>
          <button class="text-primary text-sm">查看详情</button>
        </div>

        <div class="bg-white rounded-xl p-4 shadow-card mb-4">
          <div class="flex justify-between items-center mb-4">
            <div class="text-neutral-700 font-medium">整体健康评分</div>
            <div class="text-2xl font-bold text-success">92</div>
          </div>

          <div class="space-y-4">
            <!-- 崩溃率 -->
            <div>
              <div class="flex justify-between items-center mb-1">
                <div class="text-sm text-neutral-500">崩溃率</div>
                <div class="text-sm font-medium">0.32%</div>
              </div>
              <div class="w-full bg-neutral-200 rounded-full h-2">
                <div
                  class="bg-success h-2 rounded-full"
                  style="width: 8%"
                ></div>
              </div>
            </div>

            <!-- ANR率 -->
            <div>
              <div class="flex justify-between items-center mb-1">
                <div class="text-sm text-neutral-500">ANR率</div>
                <div class="text-sm font-medium">0.15%</div>
              </div>
              <div class="w-full bg-neutral-200 rounded-full h-2">
                <div
                  class="bg-success h-2 rounded-full"
                  style="width: 4%"
                ></div>
              </div>
            </div>

            <!-- 网络错误 -->
            <div>
              <div class="flex justify-between items-center mb-1">
                <div class="text-sm text-neutral-500">网络错误率</div>
                <div class="text-sm font-medium">2.18%</div>
              </div>
              <div class="w-full bg-neutral-200 rounded-full h-2">
                <div
                  class="bg-warning h-2 rounded-full"
                  style="width: 22%"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <!-- 最近问题 -->
        <div class="bg-white rounded-xl p-4 shadow-card">
          <div class="flex justify-between items-center mb-3">
            <div class="text-neutral-700 font-medium">最近问题</div>
            <div class="text-primary text-xs">3个新问题</div>
          </div>

          <div class="space-y-3">
            <div
              class="flex items-start p-2 rounded-lg bg-danger/10 border border-danger/20"
            >
              <i class="fa fa-exclamation-circle text-danger mt-0.5 mr-2"></i>
              <div>
                <div class="text-sm font-medium text-danger">支付页面崩溃</div>
                <div class="text-xs text-neutral-500 mt-1">
                  影响用户: 128人 (0.52%)
                </div>
              </div>
            </div>

            <div
              class="flex items-start p-2 rounded-lg bg-warning/10 border border-warning/20"
            >
              <i
                class="fa fa-exclamation-triangle text-warning mt-0.5 mr-2"
              ></i>
              <div>
                <div class="text-sm font-medium text-warning">图片加载缓慢</div>
                <div class="text-xs text-neutral-500 mt-1">
                  影响用户: 3,452人 (14.0%)
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 用户活跃度趋势 -->
      <section class="mb-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-neutral-800">用户活跃度趋势</h2>
          <div class="flex space-x-2">
            <button
              class="text-xs bg-primary/10 text-primary px-2 py-1 rounded-full"
            >
              日
            </button>
            <button
              class="text-xs bg-neutral-200 text-neutral-600 px-2 py-1 rounded-full"
            >
              周
            </button>
            <button
              class="text-xs bg-neutral-200 text-neutral-600 px-2 py-1 rounded-full"
            >
              月
            </button>
          </div>
        </div>

        <div class="bg-white rounded-xl p-4 shadow-card h-64">
          <canvas id="activityTrendChart"></canvas>
        </div>
      </section>

      <!-- 功能使用分析 -->
      <section class="mb-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-neutral-800">功能使用分析</h2>
          <button class="text-primary text-sm">更多</button>
        </div>

        <div class="bg-white rounded-xl p-4 shadow-card">
          <div class="h-56">
            <canvas id="featureUsageChart"></canvas>
          </div>

          <div class="grid grid-cols-2 gap-3 mt-4">
            <div class="flex items-center p-2 rounded-lg bg-neutral-100">
              <div class="w-3 h-3 rounded-full bg-primary mr-2"></div>
              <div class="text-sm">核心功能</div>
            </div>
            <div class="flex items-center p-2 rounded-lg bg-neutral-100">
              <div class="w-3 h-3 rounded-full bg-secondary mr-2"></div>
              <div class="text-sm">辅助功能</div>
            </div>
            <div class="flex items-center p-2 rounded-lg bg-neutral-100">
              <div class="w-3 h-3 rounded-full bg-success mr-2"></div>
              <div class="text-sm">新功能</div>
            </div>
            <div class="flex items-center p-2 rounded-lg bg-neutral-100">
              <div class="w-3 h-3 rounded-full bg-warning mr-2"></div>
              <div class="text-sm">较少使用</div>
            </div>
          </div>
        </div>
      </section>

      <!-- 转化漏斗 -->
      <section class="mb-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold text-neutral-800">转化漏斗</h2>
          <div class="text-xs text-neutral-500">注册 → 活跃 → 付费</div>
        </div>

        <div class="bg-white rounded-xl p-4 shadow-card h-56">
          <canvas id="conversionFunnel"></canvas>
        </div>
      </section>
    </main>

    <!-- 底部导航 -->
    <footer
      class="fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 py-2"
    >
      <div class="grid grid-cols-4 gap-1 text-center">
        <button class="flex flex-col items-center py-1 text-primary">
          <i class="fa fa-tachometer text-lg"></i>
          <span class="text-xs mt-1">仪表盘</span>
        </button>
        <button class="flex flex-col items-center py-1 text-neutral-500">
          <i class="fa fa-users text-lg"></i>
          <span class="text-xs mt-1">用户</span>
        </button>
        <button class="flex flex-col items-center py-1 text-neutral-500">
          <i class="fa fa-line-chart text-lg"></i>
          <span class="text-xs mt-1">分析</span>
        </button>
        <button class="flex flex-col items-center py-1 text-neutral-500">
          <i class="fa fa-cog text-lg"></i>
          <span class="text-xs mt-1">设置</span>
        </button>
      </div>
    </footer>

    <script>
      // 初始化图表
      document.addEventListener("DOMContentLoaded", function () {
        // 小型趋势图的通用配置
        const miniChartConfig = {
          type: "line",
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
              x: { display: false },
              y: { display: false },
            },
            elements: {
              point: { radius: 0 },
              line: { tension: 0.4 },
            },
            animation: false,
          },
        };

        // DAU趋势图
        new Chart(document.getElementById("dauTrend"), {
          ...miniChartConfig,
          data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: [
              {
                data: [18500, 20100, 19800, 21500, 22300, 23100, 24589],
                borderColor: "#165DFF",
                backgroundColor: "rgba(22, 93, 255, 0.1)",
                fill: true,
              },
            ],
          },
        });

        // 新增用户趋势图
        new Chart(document.getElementById("newUsersTrend"), {
          ...miniChartConfig,
          data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: [
              {
                data: [3450, 3620, 3580, 3410, 3380, 3320, 3241],
                borderColor: "#FF4D4F",
                backgroundColor: "rgba(255, 77, 79, 0.1)",
                fill: true,
              },
            ],
          },
        });

        // 使用时长趋势图
        new Chart(document.getElementById("durationTrend"), {
          ...miniChartConfig,
          data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: [
              {
                data: [5.5, 6.2, 6.8, 7.1, 7.5, 8.0, 8.4],
                borderColor: "#52C41A",
                backgroundColor: "rgba(82, 196, 26, 0.1)",
                fill: true,
              },
            ],
          },
        });

        // 留存率趋势图
        new Chart(document.getElementById("retentionTrend"), {
          ...miniChartConfig,
          data: {
            labels: ["", "", "", "", "", "", ""],
            datasets: [
              {
                data: [38.2, 37.5, 39.1, 40.3, 41.5, 42.1, 42.8],
                borderColor: "#52C41A",
                backgroundColor: "rgba(82, 196, 26, 0.1)",
                fill: true,
              },
            ],
          },
        });

        // 用户活跃度趋势图
        new Chart(document.getElementById("activityTrendChart"), {
          type: "line",
          data: {
            labels: ["周一", "周二", "周三", "周四", "周五", "周六", "周日"],
            datasets: [
              {
                label: "DAU",
                data: [18500, 20100, 19800, 21500, 22300, 28100, 24589],
                borderColor: "#165DFF",
                backgroundColor: "rgba(22, 93, 255, 0.05)",
                tension: 0.4,
                fill: true,
              },
              {
                label: "新增用户",
                data: [3450, 3620, 3580, 3410, 3380, 3920, 3241],
                borderColor: "#36CFC9",
                backgroundColor: "transparent",
                tension: 0.4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              mode: "index",
              intersect: false,
            },
            plugins: {
              legend: {
                position: "top",
                labels: {
                  boxWidth: 10,
                  usePointStyle: true,
                  pointStyle: "circle",
                },
              },
            },
            scales: {
              x: {
                grid: {
                  display: false,
                },
              },
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    if (value >= 1000) {
                      return value / 1000 + "k";
                    }
                    return value;
                  },
                },
              },
            },
          },
        });

        // 功能使用分析图
        new Chart(document.getElementById("featureUsageChart"), {
          type: "bar",
          data: {
            labels: [
              "首页",
              "搜索",
              "消息",
              "个人中心",
              "收藏",
              "设置",
              "新功能A",
            ],
            datasets: [
              {
                label: "使用次数(万)",
                data: [125, 98, 76, 62, 38, 25, 18],
                backgroundColor: [
                  "#165DFF",
                  "#165DFF",
                  "#165DFF",
                  "#36CFC9",
                  "#36CFC9",
                  "#FAAD14",
                  "#52C41A",
                ],
                borderRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            indexAxis: "y",
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              x: {
                beginAtZero: true,
                grid: {
                  display: false,
                },
              },
              y: {
                grid: {
                  display: false,
                },
              },
            },
          },
        });

        // 转化漏斗图
        new Chart(document.getElementById("conversionFunnel"), {
          type: "bar",
          data: {
            labels: ["访问", "注册", "活跃", "付费"],
            datasets: [
              {
                label: "用户数",
                data: [10000, 6500, 4200, 1260],
                backgroundColor: [
                  "rgba(22, 93, 255, 0.8)",
                  "rgba(22, 93, 255, 0.6)",
                  "rgba(22, 93, 255, 0.4)",
                  "rgba(22, 93, 255, 0.2)",
                ],
                borderRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  afterLabel: function (context) {
                    const labels = ["访问", "注册", "活跃", "付费"];
                    const index = labels.indexOf(context.label);
                    const conversionRates = ["100%", "65%", "65%", "30%"];
                    return `转化率: ${conversionRates[index]}`;
                  },
                },
              },
            },
            scales: {
              x: {
                grid: {
                  display: false,
                },
              },
              y: {
                beginAtZero: true,
                grid: {
                  display: false,
                },
              },
            },
          },
        });

        // 添加卡片点击效果
        const cards = document.querySelectorAll(".shadow-card");
        cards.forEach((card) => {
          card.addEventListener("click", function () {
            this.classList.add("scale-[0.98]");
            setTimeout(() => {
              this.classList.remove("scale-[0.98]");
            }, 150);
          });
        });
      });
    </script>
  </body>
</html>
